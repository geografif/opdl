getwd()
getwd()
setwd("D:/playground/opdl/map")
op <-rast("data/op21.tif")
library(terra)
library(leaflet)
library(dplyr)
library(raster)
library(htmltools)
library(shiny)
op <-rast("data/op21.tif")
m <- leaflet() %>% addTiles() %>%
addRasterImage(op, colors = red, opacity = 0.6)
library(rgdal)
install.packages("rgdal")
Sys.setenv(PROJ_LIB = "C:/path/to/correct/proj")
library(PROJ)
install.packages("PROJ")
library(PROJ)
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles() %>%
addRasterImage(op, colors = pal, opacity = 0.8) %>%
addLegend(pal = pal, values = values(op), title = "Raster Values")
# Define color palette
pal <- colorNumeric(palette = "viridis", domain = values(r))
# Define color palette
pal <- colorNumeric(palette = "viridis", domain = values(r))
# Define color palette
pal <- colorNumeric(palette = "viridis", domain = values(op))
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles() %>%
addRasterImage(op, colors = pal, opacity = 0.8) %>%
addLegend(pal = pal, values = values(op), title = "Raster Values")
op.crs
print(m)
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles(group="OSM") %>%
addProviderTiles(providers$Esri.WorldImagery, group = "Imagery") %>%
addRasterImage(op, colors = pal, opacity = 0.8, na.color = "transparent", group="oil palm") %>%
addLayersControl(
baseGroups=c("CartoDB", "Imagery", "OSM"),
overlayGroups=c("Pump"),
options=layersControlOptions(collapsed=FALSE)) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate me",
onClick=JS("function(btn, map){ map.locate({setView: true});}")));
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles(group="OSM") %>%
addProviderTiles(providers$Esri.WorldImagery, group = "Imagery") %>%
addRasterImage(op, colors = pal, opacity = 0.8, group="oil palm") %>%
addLayersControl(
baseGroups=c("CartoDB", "Imagery", "OSM"),
overlayGroups=c("Pump"),
options=layersControlOptions(collapsed=FALSE)) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate me",
onClick=JS("function(btn, map){ map.locate({setView: true});}")));
print(m)
crs(op)
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles(group="OSM") %>%
addProviderTiles(providers$Esri.WorldImagery, group = "Imagery") %>%
addRasterImage(op, colors = "Reds", opacity = 0.8, group="oil palm") %>%
addLayersControl(
baseGroups=c("Imagery", "OSM"),
overlayGroups=c("oil palm"),
options=layersControlOptions(collapsed=FALSE)) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate me",
onClick=JS("function(btn, map){ map.locate({setView: true});}")));
print(m)
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles(group="OSM") %>%
addProviderTiles(providers$Esri.WorldImagery, group = "Imagery") %>%
addRasterImage(op, colors = "Reds", opacity = 0.8, group="oil palm") %>%
addLayersControl(
baseGroups=c("Imagery", "OSM"),
overlayGroups="oil palm",
options=layersControlOptions(collapsed=FALSE, autoZIndex = FALSE)) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate me",
onClick=JS("function(btn, map){ map.locate({setView: true});}")));
print(m)
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles(group="OSM") %>%
addProviderTiles(providers$Esri.WorldImagery, group = "Imagery", providerTileOptions(zIndex=-10)) %>%
addRasterImage(op, colors = "Reds", opacity = 0.8, group="oil palm", providerTileOptions(zIndex=-10)) %>%
addLayersControl(
baseGroups=c("Imagery", "OSM"),
overlayGroups="oil palm",
options=layersControlOptions(collapsed=TRUE, autoZIndex = FALSE)) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate me",
onClick=JS("function(btn, map){ map.locate({setView: true});}")));
print(m)
print(m)
# Create leaflet map and add raster image
m <- leaflet() %>%
addTiles(group="OSM") %>%
addProviderTiles(providers$Esri.WorldImagery, group = "Imagery", providerTileOptions(zIndex=-10)) %>%
addRasterImage(op, colors = "Reds", opacity = 0.5, group="oil palm", providerTileOptions(zIndex=-10)) %>%
setView(lng=100.649, lat=1.082, zoom=14) %>%
addLayersControl(
baseGroups=c("Imagery", "OSM"),
overlayGroups="oil palm",
options=layersControlOptions(collapsed=FALSE, autoZIndex = FALSE)) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate me",
onClick=JS("function(btn, map){ map.locate({setView: true});}")));
print(m)
# Create leaflet map and add raster image
m <- leaflet() %>%
addProviderTiles(providers$Esri.WorldImagery, group = "Imagery", providerTileOptions(zIndex=-10)) %>%
addRasterImage(op, colors = "Reds", opacity = 0.5, group="oil palm", providerTileOptions(zIndex=-10)) %>%
setView(lng=100.649, lat=1.082, zoom=14) %>%
addLayersControl(
baseGroups="Imagery",
overlayGroups="oil palm",
options=layersControlOptions(collapsed=TRUE, autoZIndex = FALSE)) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate me",
onClick=JS("function(btn, map){ map.locate({setView: true});}")));
print(m)
library(htmlwidgets)
saveWidget(m, file="m.html")
